<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Revival Ark | Gallery</title>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&family=Playball&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="css/styles.css" />

  <style>
    :root{
      --accent:#e31b23;
      --shadow: 0 10px 22px rgba(0,0,0,.10);
      --radius: 18px;
      --gap: 18px;
    }

    .brand-logo{ height:32px; width:auto; display:block; filter:invert(1); }

    .page{ padding: 34px 0 70px; }

    .kicker{
      margin: 0 0 10px;
      text-align:center;
      color: var(--accent);
      font-family:"Playball","Brush Script MT",cursive;
      font-size: 30px;
      letter-spacing: .02em;
    }

    .title{
      margin: 0 0 14px;
      text-align:center;
      font-size: 56px;
      line-height: 1;
      font-weight: 900;
      letter-spacing: .01em;
    }

    .subtitle{
      margin: 0 0 26px;
      text-align:center;
      color: rgba(0,0,0,.65);
      font-size: 14px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap: var(--gap);
      align-items: stretch;
      margin-top: 18px;
    }

    .card{
      border-radius: var(--radius);
      overflow:hidden;
      background:#f2f2f2;
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: var(--shadow);
    }

    .card img{
      width:100%;
      height: 150px;
      object-fit: cover;
      display:block;
      background:#f2f2f2;
    }

    .footer-logo-img{
      height: 48px;
      width: auto;
      display: block;
      filter: invert(1);
    }

    .lightbox{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.92);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .lightbox.active{ display: flex; }

    .lightbox img{
      max-width: 90vw;
      max-height: 90vh;
      object-fit: contain;
    }

    .lb-close{
      position: absolute;
      top: 22px;
      right: 26px;
      font-size: 36px;
      background: none;
      border: none;
      color: #fff;
      cursor: pointer;
      opacity: .85;
    }

    .lb-nav{
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 48px;
      background: none;
      border: none;
      color: #fff;
      cursor: pointer;
      padding: 14px;
      opacity: .75;
    }
    .lb-prev{ left: 18px; }
    .lb-next{ right: 18px; }
    .lb-nav:hover, .lb-close:hover{ opacity: 1; }

    @media (max-width:1100px){ .grid{ grid-template-columns: repeat(4, 1fr); } }
    @media (max-width:900px){
      .title{ font-size: 46px; }
      .grid{ grid-template-columns: repeat(3, 1fr); }
      .card img{ height: 160px; }
    }
    @media (max-width:700px){ .lb-nav{ font-size: 36px; } }
    @media (max-width:600px){
      .title{ font-size: 40px; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
      .card img{ height: 170px; }
    }

    /* Better mobile thumbnails */
@media (max-width: 600px){
  /* slightly tighter spacing so images get more room */
  .grid{
    gap: 12px;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  /* let the card control image shape */
  .card img{
    height: auto;           /* remove the forced 170px */
    aspect-ratio: 4 / 5;    /* nice portrait-ish thumbnail */
    object-fit: cover;
    border-radius: var(--radius);
  }
}

/* very small phones: 1 column + bigger thumbs */
@media (max-width: 380px){
  .grid{ grid-template-columns: 1fr; }
  .card img{ aspect-ratio: 16 / 10; } /* wider thumbnail when single column */
}

  </style>
</head>

<body>
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lb-close" type="button" aria-label="Close">&times;</button>
    <button class="lb-nav lb-prev" type="button" aria-label="Previous">&#10094;</button>
    <img id="lbImage" alt="Gallery fullscreen image" />
    <button class="lb-nav lb-next" type="button" aria-label="Next">&#10095;</button>
  </div>

  <header class="site-header" id="top">
    <div class="container nav">
      <a class="brand" href="index.html" aria-label="Revival Ark Home">
        <img src="./assets/images/Logos/Revival Ark Logo (Black).png" alt="Revival Ark" class="brand-logo" />
        Revival Ark
      </a>

      <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false" aria-controls="navMenu">
        <span></span><span></span><span></span>
      </button>

         <nav class="nav-links" id="navMenu">
        <a href="index.html">Home</a>
        <a href="who-we-are.html">About Us</a>
        <a href="gallery.html">Gallery</a>
        <a href="donation.html">Support Our Vision</a>
        <a href="contact.html">Contact Us</a>
        <!-- AUTH SLOT (single element) -->
         <a href="signin.html" id="navLogin" class="nav-auth">Login</a>
      </nav>
    </div>
  </header>

  <main class="page">
    <div class="container">
      <p class="kicker">What Have We Been Up To?</p>
      <h1 class="title">Our Gallery</h1>
      <p class="subtitle">Moments from our outreach programmes and community work.</p>
      <section class="grid" id="galleryGrid" aria-label="Gallery"></section>
    </div>
  </main>

  <footer class="footer" id="contact">
    <div class="container footer-inner">
      <div class="footer-brand">
        <img src="./assets/images/Logos/Revival Ark Logo (Black).png" alt="Revival Ark" class="footer-logo-img" />
      </div>

      <div class="footer-cols">
        <div class="footer-col">
          <h3>GET TO KNOW US</h3>
          <a href="who-we-are.html">Get To Know Us</a>
          <a href="who-we-are.html#team">Meet The Team</a>
          <a href="gallery.html">Our Gallery</a>
        </div>

        <div class="footer-col">
          <h3>HELP US MAKE A DIFFERENCE</h3>
          <a href="#contact">Pray</a>
          <a href="donation.html">Donate</a>
          <a href="whatsapp.html">Volunteer</a>
          <a href="#contact">Collaborate</a>
        </div>

        <div class="footer-col">
          <h3>CONNECT WITH US</h3>
          <p class="footer-text">+27 67 225 2699</p>
          <p class="footer-text">info@revival.ark.co.za</p>

          <div class="social">
            <a
              href="https://www.instagram.com/revival_ark_?igsh=dGUxdmQyZGZlbHI0"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Instagram"
              title="Instagram"
            >
              <img src="./assets/images/instagram.png" alt="Instagram" class="social-icon" />
            </a>

            <a
              href="https://www.tiktok.com/@revival.ark?_r=1&_t=ZS-93P5LzEWEWO"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="TikTok"
              title="TikTok"
            >
              <img src="./assets/images/tiktok.png" alt="TikTok" class="social-icon" style="filter: invert(1)" />
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <small>Â© <span id="year"></span> Revival Ark. All rights reserved.</small>
      </div>
    </div>
  </footer>

  <script src="./assets/images/images.js"></script>
  <script type="module" src="js/nav-auth.js"></script>


  <script>
    const $ = (s, r = document) => r.querySelector(s);
    const $$ = (s, r = document) => Array.from(r.querySelectorAll(s));

    $("#year").textContent = new Date().getFullYear();

    (function navToggle() {
      const btn = $(".nav-toggle");
      const menu = $("#navMenu");
      if (!btn || !menu) return;

      btn.addEventListener("click", () => {
        const open = menu.classList.toggle("open");
        btn.setAttribute("aria-expanded", open ? "true" : "false");
      });
    })();

    (function activeNav() {
      const current = (location.pathname.split("/").pop() || "index.html").toLowerCase();
      $$(".nav-links a").forEach((a) => {
        const href = (a.getAttribute("href") || "").split("#")[0].split("/").pop().toLowerCase();
        if (href && href === current) a.classList.add("active");
      });
    })();

    (function gallery() {
      const grid = $("#galleryGrid");
      const raw = window.GALLERY_IMAGES || [];
      if (!grid || !raw.length) return;

      const BASE = "./assets/images/";
      const images = raw
        .map((x) => String(x || "").trim())
        .filter(Boolean)
        .map((s) => (s.startsWith("./") || s.startsWith("/") || s.startsWith("http") ? s : BASE + s));

      const lightbox = $("#lightbox");
      const lbImg = $("#lbImage");
      const btnClose = $(".lb-close");
      const btnPrev = $(".lb-prev");
      const btnNext = $(".lb-next");

      let index = 0;

      const BATCH = 30;
      let cursor = 0;

      function open(i) {
        index = i;
        lbImg.src = images[index];
        lightbox.classList.add("active");
        lightbox.setAttribute("aria-hidden", "false");
        document.body.style.overflow = "hidden";
      }

      function close() {
        lightbox.classList.remove("active");
        lightbox.setAttribute("aria-hidden", "true");
        document.body.style.overflow = "";
      }

      function next() {
        index = (index + 1) % images.length;
        lbImg.src = images[index];
      }

      function prev() {
        index = (index - 1 + images.length) % images.length;
        lbImg.src = images[index];
      }

      function renderBatch() {
        const end = Math.min(cursor + BATCH, images.length);
        const frag = document.createDocumentFragment();

        for (let i = cursor; i < end; i++) {
          const fig = document.createElement("figure");
          fig.className = "card";

          const img = document.createElement("img");
          img.src = images[i];
          img.alt = `Gallery image ${i + 1}`;
          img.loading = "lazy";
          img.decoding = "async";
          img.dataset.index = String(i);

          fig.appendChild(img);
          frag.appendChild(fig);
        }

        grid.appendChild(frag);
        cursor = end;

        if (cursor < images.length) requestAnimationFrame(renderBatch);
      }

      renderBatch();

      grid.addEventListener("click", (e) => {
        const img = e.target.closest("img[data-index]");
        if (!img) return;
        open(parseInt(img.dataset.index, 10));
      });

      btnClose?.addEventListener("click", close);
      btnNext?.addEventListener("click", next);
      btnPrev?.addEventListener("click", prev);

      window.addEventListener("keydown", (e) => {
        if (!lightbox.classList.contains("active")) return;
        if (e.key === "Escape") close();
        if (e.key === "ArrowRight") next();
        if (e.key === "ArrowLeft") prev();
      });

      lightbox.addEventListener("click", (e) => {
        if (e.target === lightbox) close();
      });
    })();
  </script>
</body>
</html>
